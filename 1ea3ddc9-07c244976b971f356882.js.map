{"version":3,"sources":["webpack://they-work-for-us/./src/components/peopleVote.js"],"names":["cssSectionWhite","paddingBottom","background","filterChoice","text","choice","voteColor","voteText","PeopleVoteCard","fields","title","vote_date","to","css","display","color","padding","fontSize","borderRadius","border","borderLeft","margin","textDecoration","height","width","marginRight","backgroundColor","formatDate","PeopleVote","state","allVote","activeFilter","handleFilter","o","String","render","this","paddingTop","className","key","onClick","style","borderBottomColor","vote","id","Component","peopleVoteYaml","allVotelogYaml","voteLogs","allVotes","matchedVotelog","sortedAllVotes","b","a"],"mappings":"0OAMA,IACMA,EAAkB,OAAH,UADF,CAAEC,cAAe,QACf,CAEnBC,WAAY,oBAGRC,EAAe,CACnB,CAAEC,KAAF,UAAmBC,OAAQ,GAC3B,CAAED,KAAF,WAAoBC,OAAQ,GAC5B,CAAED,KAAF,cAAuBC,OAAQ,GAC/B,CAAED,KAAF,aAAsBC,OAAQ,GAC9B,CAAED,KAAF,aAAsBC,OAAQ,IAG1BC,EAAY,CAChB,EADgB,qBAEhB,EAFgB,oBAGhB,EAHgB,2BAIhB,EAJgB,UAKhB,GAAI,KAGAC,EAAW,CACf,EADe,WAEf,EAFe,cAGf,EAHe,aAIf,EAJe,aAKf,GAAI,K,oIAGAC,EAAiB,SAAC,GAAD,IAAGH,EAAH,SAAWI,EAAX,SAAmBC,EAAnB,QAAuCC,GAAvC,kCACrB,gBACEC,GAAIH,EADN,KAEEI,KAAG,QAAE,CACHC,QADG,QAEHC,MAFG,kBAGHC,QAHG,cAIHC,SAJG,SAKHC,aALG,EAMHC,OANG,kBAOHC,WAAY,cAAcd,EAPvB,GAQHe,OARG,WASH,UAAW,CACTC,eAAgB,SAVjB,eAcH,eACET,KAAG,QAAE,CACHE,MAAOV,0BAAqCC,EADzC,GAEHe,OAFG,WAGHJ,SAAU,UAHT,eAMH,eACEJ,KAAG,QAAE,CACHC,QADG,eAEHS,OAFG,GAGHC,MAHG,GAIHC,YAJG,GAKHC,gBAAiBpB,EAAUD,IAL1B,eAQJE,EAhCL,KAkCE,aAAGM,IAAG,GAlCR,IAmCE,aAAGA,IAAG,IACHc,QArCgB,M,mZA0CjBC,E,oJACJC,MAAQ,CACNC,QAAS,QADH,QAENC,aAAc,G,EAGhBC,aAAe,SAAA3B,GACb,IAAIyB,EAAU,QAAd,QACA,IAAIzB,IAGFyB,EAAU,OAAkB,YAC1B,OAAOG,EAAC,SAAeC,OAAvB,OAHF,WAAc,CAAEJ,QAAF,EAAWC,aAAc1B,K,iCAS3C8B,kBAAS,WACP,EAAkCC,KAAlC,MAAQN,EAAR,UAAiBC,EAAjB,eACA,OACE,mBACElB,KAAG,4BAEDwB,WAAY,SAFX,eAKH,eAAKC,UAAU,cACb,cACEzB,IAAG,GAFP,sBAUE,cACEA,IAAG,GAgBFV,EAAA,KAAiB,gBAAGC,EAAH,OAASC,EAAT,gBAChB,cACEkC,IADF,EAEED,UAAWP,eAFb,GAGES,QAAS,kBAAM,eAAN,IACTC,MACEV,IAAA,EACI,CACEW,kBAAmBpC,EAAUD,IAE/B,MAVQ,OAiBnByB,EAAA,SACCA,EAAA,KAAY,SAAAa,GAAI,OACd,mBAAgBJ,IAAKI,EAAKC,IADZ,QAIhB,eACE/B,IAAG,GAzDb,8B,GApBqBgC,aA6FzB,aAAe,GAAwC,IAArCC,EAAqC,EAArCA,eAAgBC,EAAqB,EAArBA,eAC1BC,EAAWF,WAAjB,GACMG,GAAW,EAAH,KAAOF,EAFgC,OAIrDE,WAAiB,SAAAN,GACf,IAAMO,EAAiB,MAAiB,CAAC,MAAOP,EAAhD,KACA,IACEA,SAAcO,EAAdP,UAGJ,IAAMQ,EAAiBF,EAAA,QACb,SAAAN,GAAI,OAAIA,EAAJ,UADS,MAEf,cACJ,OAAOS,0BAA0BC,EAAjC,cAGJ,OAAO,WAAYvB,QAASqB","file":"1ea3ddc9-07c244976b971f356882.js","sourcesContent":["import React, { Component } from \"react\"\nimport { Link } from \"gatsby\"\nimport _ from \"lodash\"\n\nimport { formatDate } from \"../utils\"\n\nconst cssSection = { paddingBottom: \"8rem\" }\nconst cssSectionWhite = {\n  ...cssSection,\n  background: \"var(--cl-white)\",\n}\n\nconst filterChoice = [\n  { text: \"ทั้งหมด\", choice: 0 },\n  { text: \"เห็นด้วย\", choice: 1 },\n  { text: \"ไม่เห็นด้วย\", choice: 2 },\n  { text: \"งดออกเสียง\", choice: 3 },\n  { text: \"ไม่ลงคะแนน\", choice: 4 },\n]\n\nconst voteColor = {\n  \"1\": \"var(--cl-vote-yes)\",\n  \"2\": \"var(--cl-vote-no)\",\n  \"3\": \"var(--cl-vote-abstained)\",\n  \"4\": \"#272727\",\n  \"\": \"-\",\n}\n\nconst voteText = {\n  \"1\": \"เห็นด้วย\",\n  \"2\": \"ไม่เห็นด้วย\",\n  \"3\": \"งดออกเสียง\",\n  \"4\": \"ไม่ลงคะแนน\",\n  \"\": \"-\",\n}\n\nconst PeopleVoteCard = ({ choice, fields, title, legal_title, vote_date }) => (\n  <Link\n    to={fields.slug}\n    css={{\n      display: \"block\",\n      color: \"var(--cl-black)\",\n      padding: \"0.5rem 2rem\",\n      fontSize: \"2.4rem\",\n      borderRadius: 4,\n      border: \"1px solid black\",\n      borderLeft: `1rem solid ${voteColor[choice]}`,\n      margin: \"20px 0px\",\n      \"&:hover\": {\n        textDecoration: \"none\",\n      },\n    }}\n  >\n    <div\n      css={{\n        color: choice === \"3\" ? \"var(--cl-black)\" : voteColor[choice],\n        margin: \"15px 0px\",\n        fontSize: \"2.4rem\",\n      }}\n    >\n      <div\n        css={{\n          display: \"inline-block\",\n          height: 15,\n          width: 15,\n          marginRight: 10,\n          backgroundColor: voteColor[choice],\n        }}\n      ></div>\n      {voteText[choice]}\n    </div>\n    <p css={{ fontFamily: \"var(--ff-title)\", fontSize: \"2.4rem\" }}>{title}</p>\n    <p css={{ fontSize: \"1.5rem\", margin: \"15px 0px\" }}>\n      {formatDate(vote_date)}\n    </p>\n  </Link>\n)\n\nclass PeopleVote extends Component {\n  state = {\n    allVote: this.props.allVote,\n    activeFilter: 0,\n  }\n\n  handleFilter = choice => {\n    let allVote = this.props.allVote\n    if (choice === 0) {\n      this.setState({ allVote, activeFilter: choice })\n    } else {\n      allVote = _.filter(allVote, function(o) {\n        return o[\"choice\"] === String(choice)\n      })\n      this.setState({ allVote, activeFilter: choice })\n    }\n  }\n\n  render() {\n    const { allVote, activeFilter } = this.state\n    return (\n      <section\n        css={{\n          ...cssSectionWhite,\n          paddingTop: \"6rem\",\n        }}\n      >\n        <div className=\"container\">\n          <h2\n            css={{\n              fontSize: \"4.8rem\",\n              textAlign: \"center\",\n              marginBottom: \"3rem\",\n            }}\n          >\n            สรุปการลงมติในสภา\n          </h2>\n          <ul\n            css={{\n              display: \"block\",\n              listStyle: \"none\",\n              textAlign: \"center\",\n              \"> li\": {\n                display: \"inline-block\",\n                fontSize: \"2.4rem\",\n                padding: \"1rem 0 0\",\n                margin: \"0 1rem\",\n                cursor: \"pointer\",\n                \"&.active\": {\n                  borderBottom: \"8px solid var(--cl-black)\",\n                },\n              },\n            }}\n          >\n            {filterChoice.map(({ text, choice }) => (\n              <li\n                key={choice}\n                className={activeFilter === choice ? \"active\" : \"\"}\n                onClick={() => this.handleFilter(choice)}\n                style={\n                  activeFilter === choice\n                    ? {\n                        borderBottomColor: voteColor[choice],\n                      }\n                    : null\n                }\n              >\n                {text}\n              </li>\n            ))}\n          </ul>\n          {allVote.length > 0 ? (\n            allVote.map(vote => (\n              <PeopleVoteCard key={vote.id} {...vote}></PeopleVoteCard>\n            ))\n          ) : (\n            <div\n              css={{\n                fontFamily: \"var(--ff-title)\",\n                fontSize: \"3.2rem\",\n                textAlign: \"center\",\n                margin: \"6rem 0\",\n              }}\n            >\n              ยังไม่เคยลงมติประเภทนี้\n            </div>\n          )}\n        </div>\n      </section>\n    )\n  }\n}\n\nexport default ({ peopleVoteYaml, allVotelogYaml }) => {\n  const voteLogs = peopleVoteYaml.votelog || []\n  const allVotes = [...allVotelogYaml.nodes]\n  // merge allVote and voteLog into allVote\n  allVotes.forEach(vote => {\n    const matchedVotelog = _.find(voteLogs, [\"key\", vote.id])\n    if (matchedVotelog) {\n      vote.choice = matchedVotelog.value\n    }\n  })\n  const sortedAllVotes = allVotes\n    .filter(vote => vote.choice)\n    .sort((a, b) => {\n      return b.vote_date.localeCompare(a.vote_date)\n    })\n\n  return <PeopleVote allVote={sortedAllVotes} />\n}\n"],"sourceRoot":""}