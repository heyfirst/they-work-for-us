{"version":3,"file":"1ea3ddc9-cebc15b2e6a9f0f20ac9.js","mappings":"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","sources":["webpack://they-work-for-us/./src/components/peopleVote.js"],"sourcesContent":["import React, { Component } from \"react\"\nimport { Link } from \"gatsby\"\nimport _ from \"lodash\"\n\nimport { formatDate } from \"../utils\"\n\nconst cssSection = { paddingBottom: \"8rem\" }\nconst cssSectionWhite = {\n  ...cssSection,\n  background: \"var(--cl-white)\",\n}\n\nconst filterChoice = [\n  { text: \"ทั้งหมด\", choice: 0 },\n  { text: \"เห็นด้วย\", choice: 1 },\n  { text: \"ไม่เห็นด้วย\", choice: 2 },\n  { text: \"งดออกเสียง\", choice: 3 },\n  { text: \"ไม่ลงคะแนน\", choice: 4 },\n]\n\nconst voteColor = {\n  \"1\": \"var(--cl-vote-yes)\",\n  \"2\": \"var(--cl-vote-no)\",\n  \"3\": \"var(--cl-vote-abstained)\",\n  \"4\": \"#272727\",\n  \"\": \"-\",\n}\n\nconst voteText = {\n  \"1\": \"เห็นด้วย\",\n  \"2\": \"ไม่เห็นด้วย\",\n  \"3\": \"งดออกเสียง\",\n  \"4\": \"ไม่ลงคะแนน\",\n  \"\": \"-\",\n}\n\nconst PeopleVoteCard = ({ choice, fields, title, legal_title, vote_date }) => (\n  <Link\n    to={fields.slug}\n    css={{\n      display: \"block\",\n      color: \"var(--cl-black)\",\n      padding: \"0.5rem 2rem\",\n      fontSize: \"2.4rem\",\n      borderRadius: 4,\n      border: \"1px solid black\",\n      borderLeft: `1rem solid ${voteColor[choice]}`,\n      margin: \"20px 0px\",\n      \"&:hover\": {\n        textDecoration: \"none\",\n      },\n    }}\n  >\n    <div\n      css={{\n        color: choice === \"3\" ? \"var(--cl-black)\" : voteColor[choice],\n        margin: \"15px 0px\",\n        fontSize: \"2.4rem\",\n      }}\n    >\n      <div\n        css={{\n          display: \"inline-block\",\n          height: 15,\n          width: 15,\n          marginRight: 10,\n          backgroundColor: voteColor[choice],\n        }}\n      ></div>\n      {voteText[choice]}\n    </div>\n    <p css={{ fontFamily: \"var(--ff-title)\", fontSize: \"2.4rem\" }}>{title}</p>\n    <p css={{ fontSize: \"1.5rem\", margin: \"15px 0px\" }}>\n      {formatDate(vote_date)}\n    </p>\n  </Link>\n)\n\nclass PeopleVote extends Component {\n  state = {\n    allVote: this.props.allVote,\n    activeFilter: 0,\n  }\n\n  handleFilter = choice => {\n    let allVote = this.props.allVote\n    if (choice === 0) {\n      this.setState({ allVote, activeFilter: choice })\n    } else {\n      allVote = _.filter(allVote, function(o) {\n        return o[\"choice\"] === String(choice)\n      })\n      this.setState({ allVote, activeFilter: choice })\n    }\n  }\n\n  render() {\n    const { allVote, activeFilter } = this.state\n    return (\n      <section\n        css={{\n          ...cssSectionWhite,\n          paddingTop: \"6rem\",\n        }}\n      >\n        <div className=\"container\">\n          <h2\n            css={{\n              fontSize: \"4.8rem\",\n              textAlign: \"center\",\n              marginBottom: \"3rem\",\n            }}\n          >\n            สรุปการลงมติในสภา\n          </h2>\n          <ul\n            css={{\n              display: \"block\",\n              listStyle: \"none\",\n              textAlign: \"center\",\n              \"> li\": {\n                display: \"inline-block\",\n                fontSize: \"2.4rem\",\n                padding: \"1rem 0 0\",\n                margin: \"0 1rem\",\n                cursor: \"pointer\",\n                \"&.active\": {\n                  borderBottom: \"8px solid var(--cl-black)\",\n                },\n              },\n            }}\n          >\n            {filterChoice.map(({ text, choice }) => (\n              <li\n                key={choice}\n                className={activeFilter === choice ? \"active\" : \"\"}\n                onClick={() => this.handleFilter(choice)}\n                style={\n                  activeFilter === choice\n                    ? {\n                        borderBottomColor: voteColor[choice],\n                      }\n                    : null\n                }\n              >\n                {text}\n              </li>\n            ))}\n          </ul>\n          {allVote.length > 0 ? (\n            allVote.map(vote => (\n              <PeopleVoteCard key={vote.id} {...vote}></PeopleVoteCard>\n            ))\n          ) : (\n            <div\n              css={{\n                fontFamily: \"var(--ff-title)\",\n                fontSize: \"3.2rem\",\n                textAlign: \"center\",\n                margin: \"6rem 0\",\n              }}\n            >\n              ยังไม่เคยลงมติประเภทนี้\n            </div>\n          )}\n        </div>\n      </section>\n    )\n  }\n}\n\nexport default ({ peopleVoteYaml, allVotelogYaml }) => {\n  const voteLogs = peopleVoteYaml.votelog || []\n  const allVotes = [...allVotelogYaml.nodes]\n  // merge allVote and voteLog into allVote\n  allVotes.forEach(vote => {\n    const matchedVotelog = _.find(voteLogs, [\"key\", vote.id])\n    if (matchedVotelog) {\n      vote.choice = matchedVotelog.value\n    }\n  })\n  const sortedAllVotes = allVotes\n    .filter(vote => vote.choice)\n    .sort((a, b) => {\n      return b.vote_date.localeCompare(a.vote_date)\n    })\n\n  return <PeopleVote allVote={sortedAllVotes} />\n}\n"],"names":["cssSectionWhite","paddingBottom","background","filterChoice","text","choice","voteColor","voteText","PeopleVoteCard","fields","title","vote_date","legal_title","___EmotionJSX","Link","to","slug","css","_css","display","color","padding","fontSize","borderRadius","border","borderLeft","margin","textDecoration","height","width","marginRight","backgroundColor","formatDate","PeopleVote","state","allVote","_this","props","activeFilter","handleFilter","_filter","o","String","setState","render","this","paddingTop","className","map","key","onClick","_this2","style","borderBottomColor","length","vote","id","Component","peopleVoteYaml","allVotelogYaml","voteLogs","votelog","allVotes","nodes","forEach","matchedVotelog","_find","value","sortedAllVotes","filter","sort","a","b","localeCompare"],"sourceRoot":""}