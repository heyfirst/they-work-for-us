{"version":3,"sources":["webpack://they-work-for-us/./src/templates/motion-category-template.js"],"names":["MotionCategoryPage","event","motions","sorters","asc","parseInt","a","b","desc","regis_no_asc","regis_no_desc","selectToStatus","agenda_in_line","mp_considering","committee_formed","rejected","to_cabinet","e","operator","registration_no","running","year","props","node","allMotions","render","pageTitle","this","pageContext","cssContainer","width","maxWidth","cssDropdown","height","backgroundColor","border","padding","appearance","color","media","cssDropdownWrapper","position","borderRadius","right","top","pointerEvents","pageStyles","background","title","css","display","margin","justifyContent","className","style","to","alignItems","src","motionCategorySlug","fontSize","marginLeft","data","allMotionYaml","flexGrow","hidden","flexWrap","flexDirection","onChange","value","state","map","borderBottom","flexShrink","marginTop","status","React"],"mappings":"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","file":"baad1b45-c4878069884507919ef5.js","sourcesContent":["import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport SEO from \"../components/seo\"\nimport Layout from \"../components/layout\"\nimport { motionCategorySlug } from \"../utils\"\nimport MotionStatusChip from \"../components/motionStatusChip\"\nimport { Link } from \"gatsby\"\nimport HiddenOnMobile from \"../components/hiddenOnMobile\"\nimport { media } from \"../styles\"\nimport DownOutlined from \"@ant-design/icons/DownOutlined\"\n\nexport const query = graphql`\n  query($sub_cat: String!) {\n    allMotionYaml(filter: { sub_cat: { eq: $sub_cat } }) {\n      totalCount\n      edges {\n        node {\n          fields {\n            slug\n          }\n          id\n          registration_no\n          name\n          status\n        }\n      }\n    }\n  }\n`\n\nclass MotionCategoryPage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.allMotions = props.data.allMotionYaml.edges.map(({ node }) => {\n      node.parsedRegistrationNo = this.convertDate(node.registration_no)\n      return node\n    })\n    this.sortBy = \"asc\"\n    this.filterBy = \"all\"\n    this.state = {\n      motions: this.allMotions,\n    }\n  }\n\n  sort = event => {\n    this.sortBy = event.target.value\n    this.updateMotions()\n  }\n\n  filter = event => {\n    this.filterBy = event.target.value\n    this.updateMotions()\n  }\n\n  updateMotions = () => {\n    const motions = [...this.allMotions]\n    const sorters = {\n      asc: (a, b) => parseInt(a.id) - parseInt(b.id),\n      desc: (a, b) => parseInt(b.id) - parseInt(a.id),\n      regis_no_asc: this.registrationNoSorter((a, b) => a - b),\n      regis_no_desc: this.registrationNoSorter((a, b) => b - a),\n    }\n    motions.sort(sorters[this.sortBy])\n\n    if (this.filterBy === \"all\") {\n      return this.setState({ motions })\n    }\n\n    const selectToStatus = {\n      agenda_in_line: \"1. รอบรรจุวาระ\",\n      mp_considering: \"2. สภาผู้แทนพิจารณา\",\n      committee_formed: \"3. ตั้ง กมธ. วิสามัญ\",\n      rejected: \"4. ไม่ตั้ง กมธ. วิสามัญ\",\n      to_cabinet: \"5. ส่งครม.\",\n    }\n\n    this.setState({\n      motions: motions.filter(e => e.status === selectToStatus[this.filterBy]),\n    })\n  }\n\n  registrationNoSorter = operator => {\n    return (a, b) => {\n      if (a.parsedRegistrationNo.year === b.parsedRegistrationNo.year) {\n        return operator(\n          a.parsedRegistrationNo.running,\n          b.parsedRegistrationNo.running\n        )\n      }\n      return operator(a.parsedRegistrationNo.year, b.parsedRegistrationNo.year)\n    }\n  }\n\n  convertDate = registration_no => {\n    const [running, year] = registration_no.split(\"/\")\n    return { running: parseInt(running), year: parseInt(year) }\n  }\n\n  render() {\n    const pageTitle = this.props.pageContext.sub_cat\n    const cssTitle = { fontSize: \"4.8rem\" }\n    const cssCountChip = {\n      fontSize: \"3.2rem\",\n      borderRadius: \"100px\",\n      backgroundColor: \"var(--cl-gray-4)\",\n      padding: \"0 2.4rem\",\n      marginLeft: \"1.2rem\",\n    }\n    const cssH2 = { fontSize: \"2.4rem\", margin: \"0\" }\n    const cssContainer = { width: \"1080px\", maxWidth: \"100%\" }\n    const cssDropdown = {\n      height: \"4rem\",\n      backgroundColor: \"transparent\",\n      border: \"none\",\n      padding: \"4px 32px 4px 4px\",\n      appearance: \"none\",\n      color: \"var(--cl-gray-1)\",\n      width: \"100%\",\n      [media(767)]: {\n        width: \"auto\",\n      },\n    }\n    const cssDropdownWrapper = {\n      position: \"relative\",\n      border: \"var(--cl-gray-4) 1px solid\",\n      borderRadius: \"4px\",\n      \".anticon\": {\n        position: \"absolute\",\n        color: \"var(--cl-gray-1)\",\n        right: \"1.2rem\",\n        top: \"1.2rem\",\n        pointerEvents: \"none\",\n      },\n    }\n\n    return (\n      <Layout\n        pageStyles={{\n          background: \"#FDFDFD\",\n        }}\n      >\n        <SEO title=\"Motions\" />\n        <section>\n          <div\n            css={{\n              display: \"flex\",\n              padding: \"2rem 0 2rem 0\",\n              maxWidth: \"100%\",\n              margin: \"0 auto\",\n              backgroundColor: \"var(--cl-gray-4)\",\n              justifyContent: \"center\",\n              [media(767)]: {\n                backgroundColor: \"transparent\",\n                justifyContent: \"space-between\",\n                maxWidth: \"calc(100% - 64px)\",\n              },\n              [media(1440)]: {\n                // container-motion-width\n                backgroundColor: \"transparent\",\n                justifyContent: \"space-between\",\n                maxWidth: \"calc(var(--container-motion-width) - 64px)\",\n              },\n            }}\n          >\n            <div className=\"path\">\n              <span>\n                <Link style={{ color: \"var(--cl-black)\" }} to={\"/motions\"}>\n                  การพิจารณาญัตติ\n                </Link>\n              </span>{\" \"}\n              {\" > \"} <span css={{ fontWeight: \"bold\" }}>{pageTitle}</span>\n            </div>\n            <HiddenOnMobile>\n              <div\n                css={{\n                  color: \"var(--cl-gray-2)\",\n                  textAlign: \"right\",\n                }}\n              >\n                ข้อมูลล่าสุดวันที่ 25 กันยายน 2563\n              </div>\n            </HiddenOnMobile>\n          </div>\n        </section>\n        <section>\n          <div className=\"container-motion\">\n            <div\n              css={{ display: \"flex\", alignItems: \"center\", ...cssContainer }}\n            >\n              <img\n                src={`/motion/icons/${motionCategorySlug(pageTitle)}.png`}\n                css={{\n                  marginBottom: \"0\",\n                  flexShrink: \"0\",\n                  display: \"block\",\n                  maxWidth: \"60px\",\n                  maxHeight: \"60px\",\n                  width: \"auto\",\n                  height: \"auto\",\n                  marginRight: \"2rem\",\n                }}\n              />\n              <h1 css={cssTitle}>\n                {pageTitle}\n                <span css={cssCountChip}>\n                  {this.props.data.allMotionYaml.totalCount}\n                </span>\n              </h1>\n            </div>\n          </div>\n        </section>\n        <section style={{ margin: \"8rem 0\" }}>\n          <div className=\"container-motion\">\n            <div css={cssContainer}>\n              <div\n                css={{\n                  display: \"flex\",\n                  width: \"100%\",\n                  alignItems: \"center\",\n                  marginBottom: \"2.4rem\",\n                }}\n              >\n                <h2 css={{ flexGrow: \"1\", ...cssH2 }}>รายการญัตติ</h2>\n                <div\n                  hidden=\"false\"\n                  css={{\n                    display: \"flex\",\n                    flexWrap: \"wrap\",\n                    flexDirection: \"column\",\n                    position: \"position\",\n                    top: \"0\",\n                    right: \"0\",\n                    [media(767)]: {\n                      flexWrap: \"nowarp\",\n                      flexDirection: \"row\",\n                      position: \"inherit\",\n                      backgroundColor: \"transparent\",\n                      border: \"none\",\n                    },\n                  }}\n                >\n                  <div\n                    css={{\n                      margin: \"0 0 1rem 0\",\n                      [media(767)]: { margin: \"0 1rem 0 0\" },\n                      ...cssDropdownWrapper,\n                    }}\n                  >\n                    <select\n                      onChange={this.sort}\n                      value={this.sortBy}\n                      css={cssDropdown}\n                    >\n                      <option value=\"desc\">อัพเดทใหม่ > เก่า</option>\n                      <option value=\"asc\">อัพเดทเก่า > ใหม่</option>\n                      <option value=\"regis_no_desc\">\n                        เลขรับญัตติมาก > น้อย\n                      </option>\n                      <option value=\"regis_no_asc\">\n                        เลขรับญัตติน้อย > มาก\n                      </option>\n                    </select>\n                    <DownOutlined />\n                  </div>\n                  <div css={cssDropdownWrapper}>\n                    <select\n                      onChange={this.filter}\n                      value={this.filterBy}\n                      css={cssDropdown}\n                    >\n                      <option value=\"all\">ทุกสถานะ</option>\n                      <option value=\"agenda_in_line\">รอบรรจุวาระ</option>\n                      <option value=\"mp_considering\">สภาผู้แทนพิจารณา</option>\n                      <option value=\"committee_formed\">\n                        ตั้ง กมธ. วิสามัญ\n                      </option>\n                      <option value=\"rejected\">ไม่ตั้ง กมธ. วิสามัญ</option>\n                      <option value=\"to_cabinet\">ส่งครม.</option>\n                    </select>\n                    <DownOutlined />\n                  </div>\n                </div>\n              </div>\n              {this.state.motions.map(node => (\n                <Link\n                  to={`/motions/${node.id}`}\n                  css={{ \":hover\": { textDecoration: \"none\" } }}\n                >\n                  <div\n                    css={{\n                      display: \"flex\",\n                      width: \"100%\",\n                      flexWrap: \"wrap\",\n                      padding: \"2.4rem 0\",\n                      borderBottom: \"var(--cl-gray-3) 1px solid\",\n                      [media(767)]: {\n                        flexWrap: \"nowrap\",\n                      },\n                    }}\n                  >\n                    <div\n                      css={{\n                        margin: \"0 1rem\",\n                        color: \"var(--cl-gray-1)\",\n                        fontSize: \"1.6rem\",\n                        lineHeight: \"3rem\",\n                        minWidth: \"100px\",\n                      }}\n                    >\n                      {node.registration_no}\n                    </div>\n                    <div\n                      css={{\n                        margin: \"0 1rem\",\n                        fontSize: \"2rem\",\n                        lineHeight: \"3rem\",\n                        flexGrow: \"1\",\n                        color: \"var(--cl-black)\",\n                      }}\n                    >\n                      {node.name}\n                    </div>\n                    <div\n                      css={{\n                        width: \"200px\",\n                        flexShrink: \"0\",\n                        marginLeft: \"0\",\n                        marginTop: \"2rem\",\n                        [media(767)]: {\n                          marginLeft: \"2rem\",\n                          marginTop: \"0rem\",\n                        },\n                      }}\n                    >\n                      <MotionStatusChip status={node.status}></MotionStatusChip>\n                    </div>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </div>\n        </section>\n      </Layout>\n    )\n  }\n}\nexport default MotionCategoryPage\n"],"sourceRoot":""}