{"version":3,"file":"47379b9d-308d4d9c7f43db74cc98.js","mappings":"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","sources":["webpack://they-work-for-us/./src/templates/votelog-template.js"],"sourcesContent":["import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport { GatsbyImage } from \"gatsby-plugin-image\"\nimport { css } from \"@emotion/react\"\nimport _ from \"lodash\"\n\nimport ExternalLink from \"../components/externalLink\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport VoterList from \"../components/voterList\"\nimport Waffle from \"../components/waffle\"\nimport VoteLogLegend from \"../components/voteLogLegend\"\nimport { media } from \"../styles\"\n\nexport const query = graphql`\n  query($slug: String!) {\n    votelogYaml(fields: { slug: { eq: $slug } }) {\n      id\n      title\n      legal_title\n      vote_date(formatString: \"DD.M.YYYY\")\n      description_th\n      reference\n      document {\n        title\n        link\n      }\n      meeting\n      passed\n      is_no_vote\n      no_vote_description\n      approve\n      disprove\n      abstained\n      absent\n      total_voter\n    }\n    voteRecordIcon: file(\n      relativePath: { eq: \"images/icons/votelog/votelog.png\" }\n    ) {\n      childImageSharp {\n        gatsbyImageData(height: 30, layout: FIXED)\n      }\n    }\n    downloadIcon: file(\n      relativePath: { eq: \"images/icons/download/download.png\" }\n    ) {\n      childImageSharp {\n        gatsbyImageData(height: 20, layout: FIXED)\n      }\n    }\n    allPeopleVoteYaml {\n      nodes {\n        id\n        title\n        name\n        lastname\n        votelog {\n          key\n          value\n        }\n      }\n    }\n    allPeopleYaml {\n      nodes {\n        id\n        fields {\n          slug\n        }\n        is_mp\n        is_senator\n        is_cabinet\n        mp_type\n        mp_list\n        mp_province\n        mp_zone\n        party\n      }\n    }\n  }\n`\n\nconst cssSection = {\n  borderBottom: \"0.5rem solid black\",\n  paddingTop: \"3rem\",\n  paddingBottom: \"3rem\",\n  h2: {\n    fontSize: \"4.8rem\",\n    textAlign: \"center\",\n  },\n  \".dot\": {\n    margin: \"0 1rem\",\n    height: \"2rem\",\n    width: \"2rem\",\n    display: \"inline-block\",\n    borderRadius: \"50%\",\n  },\n}\n\nconst filterVote = (combined, key, value) =>\n  _.filter(combined, o => {\n    return (\n      _.get(\n        _.find(o.votelog || [], p => p.key === key),\n        \"value\"\n      ) === value\n    )\n  })\n\nconst VotelogPage = ({\n  data: {\n    votelogYaml,\n    voteRecordIcon,\n    downloadIcon,\n    allPeopleVoteYaml,\n    allPeopleYaml,\n  },\n}) => {\n  const { passed, total_voter } = votelogYaml\n\n  let combined = []\n  allPeopleVoteYaml.nodes.forEach(votelog => {\n    const matched = _.find(allPeopleYaml.nodes, [\"id\", votelog.id])\n    combined.push({ ...votelog, ...matched })\n  })\n  const approve = filterVote(combined, votelogYaml.id, \"1\")\n  const disprove = filterVote(combined, votelogYaml.id, \"2\")\n  const abstained = filterVote(combined, votelogYaml.id, \"3\")\n  const absent = filterVote(combined, votelogYaml.id, \"4\")\n\n  return (\n    <Layout\n      pageStyles={{\n        background: \"#000\",\n      }}\n    >\n      <SEO title={votelogYaml.title} imageUrl=\"/seo/share/votelog.png\" />\n\n      <div\n        style={{\n          background: \"#fff\",\n          borderRadius: \"10px\",\n          padding: \"3rem\",\n          margin: \"5rem auto\",\n          maxWidth: \"min(calc(100% - 2rem), 920px)\",\n        }}\n      >\n        <section\n          css={{\n            ...cssSection,\n            paddingBottom: \"1rem !important\",\n            span: {\n              fontSize: \"3rem\",\n            },\n          }}\n        >\n          <div className=\"container\">\n            <span>\n              <GatsbyImage\n                image={voteRecordIcon.childImageSharp.gatsbyImageData}\n                style={{\n                  verticalAlign: \"middle\",\n                  display: \"inline-block\",\n                  marginRight: \"5px\",\n                }}\n              />\n              {votelogYaml.meeting}\n              <span\n                css={css`\n                  float: right;\n                `}\n              >\n                {votelogYaml.vote_date}\n              </span>\n            </span>\n          </div>\n        </section>\n        <section\n          css={{\n            ...cssSection,\n            paddingBottom: \"1rem !important\",\n            span: {\n              fontSize: \"3rem\",\n            },\n          }}\n        >\n          <div\n            className=\"container\"\n            css={css`\n              margin-bottom: 3rem;\n            `}\n          >\n            {\" \"}\n            <h1\n              css={{\n                marginTop: 0,\n              }}\n            >{`${votelogYaml.title}`}</h1>\n            <p\n              css={css`\n                font-size: 2rem;\n              `}\n            >\n              {votelogYaml.legal_title}\n            </p>\n          </div>\n          <span>\n            สถานะ{\" \"}\n            {passed ? (\n              <span\n                css={css`\n                  color: var(--cl-vote-yes);\n                `}\n              >\n                <span\n                  className=\"dot\"\n                  css={{\n                    backgroundColor: \"var(--cl-vote-yes)\",\n                  }}\n                ></span>\n                ผ่าน\n              </span>\n            ) : (\n              <span\n                css={css`\n                  color: var(--cl-vote-no);\n                `}\n              >\n                <span\n                  className=\"dot\"\n                  css={{\n                    backgroundColor: \"var(--cl-vote-no)\",\n                  }}\n                ></span>\n                ไม่ผ่าน\n              </span>\n            )}\n            <span\n              css={{\n                display: \"block\",\n                [media(767)]: {\n                  float: \"right\",\n                },\n              }}\n            >\n              ผู้เข้าร่วมประชุม {total_voter} คน\n            </span>\n          </span>\n        </section>\n        <section\n          css={{\n            display: \"flex\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n            ...cssSection,\n          }}\n        >\n          {votelogYaml.is_no_vote ? (\n            <div\n              css={css`\n                font-size: 2rem;\n                align-self: flex-start;\n              `}\n            >\n              {votelogYaml.no_vote_description || \"-\"}\n            </div>\n          ) : (\n            <>\n              <Waffle\n                data={[\n                  approve.map(p => ({ node: p })),\n                  disprove.map(p => ({ node: p })),\n                  abstained.map(p => ({ node: p })),\n                  absent.map(p => ({ node: p })),\n                ]}\n                colors={[\n                  `var(--cl-vote-yes)`,\n                  `var(--cl-vote-no)`,\n                  `var(--cl-vote-abstained)`,\n                  `var(--cl-vote-absent)`,\n                ]}\n                borderColors={[\n                  `var(--cl-vote-yes)`,\n                  `var(--cl-vote-no)`,\n                  `var(--cl-vote-abstained)`,\n                  `var(--cl-black)`,\n                ]}\n              />\n              <div css={{ marginTop: \"4rem\" }}>\n                <VoteLogLegend {...votelogYaml} />\n              </div>\n            </>\n          )}\n        </section>\n        <section\n          css={{\n            ...cssSection,\n            fontSize: \"2rem\",\n          }}\n        >\n          <h1>เนื้อหา</h1>\n          <p>{votelogYaml.description_th}</p>\n          <p\n            css={css`\n              font-weight: bold;\n              padding-top: 2em;\n            `}\n          >\n            อ้างอิง\n          </p>\n          <ExternalLink\n            href={votelogYaml.reference}\n            css={css`\n              :hover {\n                color: var(--cl-black);\n              }\n            `}\n          >\n            <p>{votelogYaml.reference}</p>\n          </ExternalLink>\n          <p\n            css={css`\n              font-weight: bold;\n              padding-top: 2em;\n            `}\n          >\n            เอกสารการลงมติ\n          </p>\n          <button\n            css={css`\n              display: flex;\n              flex-flow: row wrap;\n              padding: 0;\n              border: none;\n              background: none;\n              width: 100%;\n              border-radius: 5px;\n              pointer-events: none;\n              &:focus {\n                outline: none;\n              }\n              text-align: left;\n            `}\n          >\n            {votelogYaml.document\n              .filter(doc => doc.link)\n              .map(doc => (\n                <ExternalLink\n                  key={doc.link}\n                  href={doc.link}\n                  css={css`\n                    color: var(--cl-black);\n                    :hover {\n                      color: var(--cl-black);\n                    }\n                  `}\n                >\n                  <span\n                    css={css`\n                      font-size: 2.4rem;\n                      font-family: var(--ff-title);\n                      line-height: 3rem;\n                      cursor: pointer;\n                      border-radius: 5px;\n                      padding: 1rem 1rem;\n                      margin-right: 1rem;\n                      margin-bottom: 1rem;\n                      display: block;\n                      background-color: var(--cl-pink);\n                      pointer-events: auto;\n                    `}\n                  >\n                    <GatsbyImage\n                      image={downloadIcon.childImageSharp.gatsbyImageData}\n                      css={{ marginRight: \"1rem\" }}\n                    />\n                    {doc.title || \"เอกสาร\"}\n                  </span>\n                </ExternalLink>\n              ))}\n          </button>\n        </section>\n        <section>\n          <div className=\"container\">\n            <h1>บันทึกคะแนนเสียง</h1>\n            {votelogYaml.is_no_vote ? (\n              <div\n                css={css`\n                  font-size: 2rem;\n                `}\n              >\n                ไม่มีข้อมูลการลงคะแนนเสียง\n              </div>\n            ) : (\n              <VoterList data={[approve, disprove, abstained, absent]} />\n            )}\n          </div>\n        </section>\n      </div>\n    </Layout>\n  )\n}\n\nexport default VotelogPage\n"],"names":["cssSection","borderBottom","paddingTop","paddingBottom","h2","fontSize","textAlign","margin","height","width","display","borderRadius","filterVote","combined","key","value","_filter","o","_get","_find","votelog","p","data","votelogYaml","voteRecordIcon","downloadIcon","allPeopleVoteYaml","allPeopleYaml","passed","total_voter","nodes","forEach","matched","id","push","approve","disprove","abstained","absent","___EmotionJSX","Layout","pageStyles","background","SEO","title","imageUrl","style","padding","maxWidth","css","_css","span","className","GatsbyImage","image","childImageSharp","gatsbyImageData","verticalAlign","marginRight","meeting","vote_date","legal_title","media","float","alignItems","flexDirection","is_no_vote","no_vote_description","Waffle","map","node","colors","borderColors","VoteLogLegend","description_th","ExternalLink","href","reference","document","filter","doc","link","VoterList"],"sourceRoot":""}